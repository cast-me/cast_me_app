// Run from lib:
// protoc --dart_out=. business_logic/models/protobufs/*.proto

syntax = "proto3";

package cast_me_app;

import "business_logic/models/protobufs/topic_base.proto";
import "business_logic/models/protobufs/like_base.proto";

message CastBase {
    // Server specified.
    string id = 1;
    string created_at_string = 2;

    // Fetched on read via a join.
    string root_id = 3;
    string author_username = 4;
    string author_display_name = 5;
    string image_url = 6;
    string accent_color_base = 7;
    uint32 view_count = 8;
    bool has_viewed = 9;
    repeated LikeBase likes = 10;
    // We use names instead of `TopicBase` because we need to
    // perform an array agg to filter and that only works with
    // raw text values.
    repeated string topic_names = 11;
    repeated string tagged_usernames = 12;

    // Client Specified.
    string author_id = 13;
    string title = 14;
    string topic = 15;
    uint32 duration_ms = 16;
    string audio_url = 17;
    string reply_to = 18;
    string external_url = 19;
}